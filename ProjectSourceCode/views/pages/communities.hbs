{{! Profile page wrapper with CU color bg}}
<section class="community-wrap">
    <div class="container">
        <div class="row justify-content-center mt-4 mb-5">
            <div class="col-12 col-md-10 col-lg-8">
                {{! Page title and back to home button}}
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center gap-3">

                        <div>
                            <h2>Your Communities</h2>
                        </div>
                    </div>
                    <a href="/home" class="btn btn-outline-cu btn-sm">Return to Home Page</a>
                </div>
                {{! Community card with community info and edit form}}
                {{#each communities}}
                <div class="card community-card shadow-sm mb-4" onmouseover="this.style.cursor='pointer'"
                    onmouseleave="this.style.cursor='default'"
                    onclick="window.location.href='/communities/{{community_id}}'">
                    <div class="card-body p-4 p-md-5">
                        {{! Community info section}}
                        <div class="d-flex align-items-center gap-4 mb-4">
                            {{! Community details}}
                            <div>
                                <div>
                                    <div class="h5 mb-0 fw-bold">{{name}}</div>
                                    <div class="fw-semibold small">Created at: {{formatDate created_at}}</div>
                                </div>

                                <div class="text-secondary small fw-bold">{{community_type}}</div>
                                <div class="text-secondary small">{{number_of_members}} Members</div>

                            </div>
                        </div>
                        {{! messages for save success or error}}
                        {{#if saved}}<div class="alert alert-success">Changes have been saved.</div>{{/if}}
                        {{#if error}}<div class="alert alert-danger">{{error}}</div>{{/if}}

                        <form action="/communities/save-description" method="POST" class="row g-3"
                            onclick="event.stopPropagation();">

                            <div class="col-12">
                                <label for="description" class="form-label">Description</label>

                                <textarea id="description" name="description" class="form-control" rows="4" {{#unless
                                    (eq ../user.role 'moderator' )}}readonly{{/unless}}
                                    onclick="event.stopPropagation();">{{description}}</textarea>
                            </div>

                            <div class="col-12">
                                {{#if (eq ../user.role 'moderator')}}
                                {{#if description}}
                                <button type="submit" class="btn btn-cu w-100" onclick="event.stopPropagation();">Save
                                    Description</button>
                                {{/if}}
                                {{/if}}
                            </div>

                        </form>
                    </div>
                </div>
                {{/each}}
                {{> footer}}
            </div>
        </div>
    </div>
</section>